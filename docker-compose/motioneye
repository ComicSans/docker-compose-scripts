version: "3.9"
services:
  motioneye:
    image: ccrisan/motioneye:master-armhf
    container_name: motioneye
    restart: unless-stopped
    volumes:
      - /etc/localtime:/etc/localtime:ro
      - ../configs/motioneye/cameras:/var/lib/motioneye
      - ../configs/motioneye/etc:/etc/motioneye
    deploy:
      resources:
        limits:
          cpus: '1.5'
          memory: 2048M
    healthcheck:
      test: "curl --fail http://localhost:8765/ || exit 1"
    hostname: motioneye-server
    networks:
      default:
        ipv4_address: 192.168.178.195
networks:
  default:
    external: true
    name: docker-macvlan
